<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Flower Wdila</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-pink-50 min-h-screen">

<!-- HEADER -->
<header class="bg-pink-600 text-white p-4 flex justify-between items-center">
  <div>
    <h1 class="text-xl font-bold">üå∏ Flower Wdila</h1>
    <p class="text-sm italic">Keindahan bunga untuk setiap momen</p>
  </div>
  <button onclick="openCart()" class="relative">
    <span class="bg-yellow-400 p-2 rounded-full text-black">üõí</span>
    <span id="cart-count"
      class="absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 rounded-full">0</span>
  </button>
</header>

<!-- PRODUK -->
<main class="p-6">
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">

<!-- PRODUK TEMPLATE -->
<script>
const products = [
 {id:"Mawar",nama:"Bunga Mawar",harga:50000,img:"Mawar.jpeg"},
 {id:"Tulip",nama:"Bunga Tulip",harga:65000,img:"Tulip.jpeg"},
 {id:"Matahari",nama:"Bunga Matahari",harga:120000,img:"Matahari.jpeg"},
 {id:"Peony",nama:"Bunga Peony",harga:150000,img:"Peony.jpeg"},
 {id:"Aster",nama:"Bunga Aster",harga:40000,img:"Aster.jpeg"},
 {id:"Lily",nama:"Bunga Lily",harga:75000,img:"Lily.jpeg"}
];

document.write(products.map(p=>`
<div class="bg-white rounded-xl shadow p-4">
 <img src="${p.img}" class="w-full h-52 object-cover rounded mb-2">
 <h3 class="font-bold">${p.nama}</h3>
 <p class="text-pink-600 font-semibold">Rp${p.harga.toLocaleString()}</p>

 <button onclick="addToCart('${p.nama}',${p.harga})"
  class="mt-2 w-full bg-pink-500 text-white py-2 rounded">
  Tambah Keranjang
 </button>

 <button onclick="toggleReview('${p.id}')"
  class="mt-2 w-full border border-pink-500 text-pink-600 py-2 rounded">
  Tulis Ulasan
 </button>

 <div id="review-form-${p.id}" class="hidden mt-2">
  <textarea id="review-input-${p.id}"
   class="w-full border p-2 rounded"
   placeholder="Tulis ulasan..."></textarea>
  <button onclick="submitReview('${p.id}')"
   class="mt-1 bg-pink-600 text-white px-3 py-1 rounded">
   Kirim
  </button>
 </div>

 <div id="review-list-${p.id}" class="mt-2 text-sm"></div>
</div>
`).join(""));
</script>

</div>
</main>

<!-- MODAL CHECKOUT -->
<div id="cartModal"
 class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
<div class="bg-white w-full max-w-md p-4 rounded-xl">

<h2 class="font-bold text-pink-600 text-lg mb-2">Checkout</h2>

<div id="cartItems"></div>

<select id="shipping" class="w-full border p-2 rounded mt-2" onchange="renderCart()">
<option value="0">Ambil di Toko (Gratis)</option>
<option value="10000">Reguler - Rp10.000</option>
<option value="20000">Express - Rp20.000</option>
</select>

<select id="paymentMethod" class="w-full border p-2 rounded mt-2" onchange="showTransfer()">
<option value="">-- Metode Pembayaran --</option>
<option value="Transfer Bank">Transfer Bank</option>
<option value="COD">COD</option>
<option value="QRIS">QRIS</option>
</select>

<div id="transferDetail" class="hidden bg-pink-100 p-2 rounded text-sm mt-2">
<p><b>Bank BCA</b></p>
<p>No Rekening: <b>1234567890</b></p>
<p>Atas Nama: <b>Flower Wdila</b></p>
</div>

<p class="text-right font-semibold mt-2">
Total: <span id="cartTotal">Rp0</span>
</p>

<button onclick="checkout()"
 class="w-full bg-pink-500 text-white py-2 rounded mt-3">
Bayar Sekarang
</button>

<button onclick="closeCart()"
 class="w-full mt-2 border border-pink-500 text-pink-600 py-2 rounded">
Tutup
</button>

</div>
</div>

<!-- INVOICE -->
<div id="invoiceModal"
 class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
<div class="bg-white w-full max-w-md p-4 rounded-xl">
<h2 class="font-bold text-pink-600 mb-2">üßæ Invoice</h2>
<div id="invoiceContent" class="text-sm"></div>
<button onclick="closeInvoice()"
 class="w-full mt-3 bg-pink-500 text-white py-2 rounded">
Tutup
</button>
</div>
</div>

<!-- SCRIPT -->
<script>
let cart=JSON.parse(localStorage.getItem("cart"))||[];

/* CART */
function addToCart(n,h){
 let i=cart.find(x=>x.nama===n);
 i?i.qty++:cart.push({nama:n,harga:h,qty:1});
 saveCart();
}
function saveCart(){
 localStorage.setItem("cart",JSON.stringify(cart));
 updateCartCount();
}
function updateCartCount(){
 document.getElementById("cart-count").innerText=
 cart.reduce((s,i)=>s+i.qty,0);
}
function openCart(){document.getElementById("cartModal").classList.remove("hidden");renderCart();}
function closeCart(){document.getElementById("cartModal").classList.add("hidden");}
function renderCart(){
 let h="",t=0;
 cart.forEach((i,x)=>{
  t+=i.harga*i.qty;
  h+=`
  <div class="flex justify-between items-center border-b py-1">
   <span>${i.nama}</span>
   <div class="flex gap-2">
    <button onclick="chg(${x},-1)">‚àí</button>
    <span>${i.qty}</span>
    <button onclick="chg(${x},1)">+</button>
    <button onclick="del(${x})" class="text-red-500">‚úñ</button>
   </div>
  </div>`;
 });
 document.getElementById("cartItems").innerHTML=h;
 let o=parseInt(document.getElementById("shipping").value);
 document.getElementById("cartTotal").innerText="Rp"+(t+o).toLocaleString();
}
function chg(i,v){cart[i].qty+=v;if(cart[i].qty<=0)cart.splice(i,1);saveCart();renderCart();}
function del(i){cart.splice(i,1);saveCart();renderCart();}
function showTransfer(){
 document.getElementById("transferDetail").classList.toggle("hidden",
 document.getElementById("paymentMethod").value!=="Transfer Bank");
}
function checkout(){
 let m=document.getElementById("paymentMethod").value;
 if(!m||cart.length===0)return alert("Lengkapi checkout!");
 let o=parseInt(document.getElementById("shipping").value);
 let s=cart.reduce((a,b)=>a+b.harga*b.qty,0);
 document.getElementById("invoiceContent").innerHTML=
 `<p>Metode: ${m}</p>
 <p>Subtotal: Rp${s.toLocaleString()}</p>
 <p>Ongkir: Rp${o.toLocaleString()}</p>
 <b>Total: Rp${(s+o).toLocaleString()}</b>`;
 document.getElementById("invoiceModal").classList.remove("hidden");
 cart=[];localStorage.removeItem("cart");updateCartCount();closeCart();
}
function closeInvoice(){document.getElementById("invoiceModal").classList.add("hidden");}

/* REVIEW */
function toggleReview(id){
 document.getElementById("review-form-"+id).classList.toggle("hidden");
}
function submitReview(id){
 let i=document.getElementById("review-input-"+id);
 if(!i.value.trim())return;
 let d=JSON.parse(localStorage.getItem("reviews-"+id))||[];
 d.push(i.value);
 localStorage.setItem("reviews-"+id,JSON.stringify(d));
 i.value="";loadReviews(id);
}
function loadReviews(id){
 let l=document.getElementById("review-list-"+id);
 let d=JSON.parse(localStorage.getItem("reviews-"+id))||[];
 l.innerHTML=d.map(r=>`<p class="bg-pink-100 p-1 rounded mt-1">üìù ${r}</p>`).join("");
}
document.addEventListener("DOMContentLoaded",()=>{
 updateCartCount();
 products.forEach(p=>loadReviews(p.id));
});
</script>

</body>
</html>

