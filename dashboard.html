<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Flower Wdila</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-pink-50 min-h-screen">

<!-- HEADER -->
<header class="bg-pink-600 text-white p-4 flex justify-between items-center">
  <div>
    <h1 class="text-xl font-bold">ðŸŒ¸ Flower Wdila</h1>
    <p class="text-sm italic">Keindahan bunga untuk setiap momen</p>
  </div>
  <button onclick="openCart()" class="relative">
    <span class="bg-yellow-400 p-2 rounded-full text-black">ðŸ›’</span>
    <span id="cart-count"
      class="absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 rounded-full">0</span>
  </button>
</header>

<!-- PRODUK -->
<main class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
<script>
const products=[
{id:"Mawar",nama:"Bunga Mawar",harga:50000, img: "Mawar.jpeg"},
{id:"Tulip",nama:"Bunga Tulip",harga:65000, img: "Tulip.jpeg"},
{id:"Matahari",nama:"Bunga Matahari",harga:120000, img: "Matahari.jpeg"},
{id:"Peony",nama:"Bunga Peony",harga:150000, img: "Peony.jpeg"},
{id:"Aster",nama:"Bunga Aster",harga:40000, img: "Aster.jpeg"},
{id:"Lily",nama:"Bunga Lily",harga:75000, img: "Lily.jpeg"}
];

document.write(products.map(p=>`
<div class="bg-white p-4 rounded-xl shadow">
<h3 class="font-bold">${p.nama}</h3>
<p class="text-pink-600 font-semibold">Rp${p.harga.toLocaleString()}</p>
<button onclick="addToCart('${p.nama}',${p.harga})"
 class="mt-2 w-full bg-pink-500 text-white py-2 rounded">
Tambah Keranjang
</button>
</div>
`).join(""));
</script>
</main>

<!-- MODAL CHECKOUT -->
<div id="cartModal"
 class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
<div class="bg-white w-full max-w-md p-4 rounded-xl">

<h2 class="font-bold text-pink-600 text-lg mb-2">Checkout</h2>

<div id="cartItems"></div>

<!-- ONGKIR -->
<select id="shipping" class="w-full border p-2 rounded mt-2" onchange="renderCart()">
<option value="0">Ambil di Toko (Gratis)</option>
<option value="10000">Reguler - Rp10.000</option>
<option value="20000">Express - Rp20.000</option>
</select>

<!-- METODE BAYAR -->
<select id="paymentMethod" class="w-full border p-2 rounded mt-2" onchange="showTransfer()">
<option value="">-- Metode Pembayaran --</option>
<option value="Transfer Bank">Transfer Bank</option>
<option value="COD">COD</option>
<option value="QRIS">QRIS</option>
</select>

<!-- DETAIL TRANSFER -->
<div id="transferDetail"
 class="hidden bg-pink-100 p-2 rounded text-sm mt-2">
<p><b>Bank BCA</b></p>
<p>No Rekening: <b>1234567890</b></p>
<p>Atas Nama: <b>Flower Wdila</b></p>
</div>

<p class="text-right font-semibold mt-2">
Total Bayar: <span id="cartTotal">Rp0</span>
</p>

<button onclick="checkout()"
 class="w-full bg-pink-500 text-white py-2 rounded mt-3">
Bayar Sekarang
</button>

<button onclick="closeCart()"
 class="w-full mt-2 border border-pink-500 text-pink-600 py-2 rounded">
Tutup
</button>

</div>
</div>

<!-- MODAL INVOICE -->
<div id="invoiceModal"
 class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
<div class="bg-white w-full max-w-md p-4 rounded-xl">

<h2 class="text-lg font-bold text-pink-600 mb-2">ðŸ§¾ Invoice</h2>

<div id="invoiceContent" class="text-sm"></div>

<button onclick="closeInvoice()"
 class="w-full mt-3 bg-pink-500 text-white py-2 rounded">
Tutup
</button>

</div>
</div>

<!-- SCRIPT -->
<script>
let cart=JSON.parse(localStorage.getItem("cart"))||[];

function addToCart(nama,harga){
 let i=cart.find(x=>x.nama===nama);
 if(i)i.qty++;
 else cart.push({nama,harga,qty:1});
 saveCart();
}

function saveCart(){
 localStorage.setItem("cart",JSON.stringify(cart));
 updateCartCount();
}

function updateCartCount(){
 document.getElementById("cart-count").innerText=
 cart.reduce((s,i)=>s+i.qty,0);
}

function openCart(){
 document.getElementById("cartModal").classList.remove("hidden");
 renderCart();
}

function closeCart(){
 document.getElementById("cartModal").classList.add("hidden");
}

function renderCart(){
 let html="",total=0;
 cart.forEach((i,idx)=>{
  total+=i.harga*i.qty;
  html+=`
  <div class="flex justify-between items-center border-b py-1 text-sm">
   <span>${i.nama}</span>
   <div class="flex items-center gap-2">
    <button onclick="changeQty(${idx},-1)">âˆ’</button>
    <span>${i.qty}</span>
    <button onclick="changeQty(${idx},1)">+</button>
    <button onclick="removeItem(${idx})" class="text-red-500">âœ–</button>
   </div>
  </div>`;
 });
 document.getElementById("cartItems").innerHTML=html;
 let ongkir=parseInt(document.getElementById("shipping").value);
 document.getElementById("cartTotal").innerText=
 "Rp"+(total+ongkir).toLocaleString();
}

function changeQty(i,v){
 cart[i].qty+=v;
 if(cart[i].qty<=0)cart.splice(i,1);
 saveCart();renderCart();
}

function removeItem(i){
 cart.splice(i,1);
 saveCart();renderCart();
}

function showTransfer(){
 document.getElementById("transferDetail")
 .classList.toggle("hidden",
 document.getElementById("paymentMethod").value!=="Transfer Bank");
}

function checkout(){
 if(cart.length===0)return alert("Keranjang kosong");
 let m=document.getElementById("paymentMethod").value;
 if(!m)return alert("Pilih metode pembayaran");

 let ongkir=parseInt(document.getElementById("shipping").value);
 let subtotal=cart.reduce((s,i)=>s+i.harga*i.qty,0);
 let total=subtotal+ongkir;

 document.getElementById("invoiceContent").innerHTML=`
 <p><b>Metode Bayar:</b> ${m}</p>
 <p><b>Subtotal:</b> Rp${subtotal.toLocaleString()}</p>
 <p><b>Ongkir:</b> Rp${ongkir.toLocaleString()}</p>
 <p class="font-bold mt-2">Total: Rp${total.toLocaleString()}</p>
 <hr class="my-2">
 ${cart.map(i=>`<p>${i.nama} x${i.qty}</p>`).join("")}
 `;

 document.getElementById("invoiceModal").classList.remove("hidden");
 cart=[];localStorage.removeItem("cart");
 updateCartCount();closeCart();
}

function closeInvoice(){
 document.getElementById("invoiceModal").classList.add("hidden");
}

document.addEventListener("DOMContentLoaded",updateCartCount);
</script>

</body>
</html>
